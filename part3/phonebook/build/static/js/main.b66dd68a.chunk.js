(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(13),u=n.n(r),c=n(2),l=n(3),i=n.n(l),s="/api/persons",m=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(){return i.a.get(s).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},b=function(e,t){return i.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){var t=e.person,n=e.handleDelete;return o.a.createElement("li",null,t.name," ",t.number,o.a.createElement("button",{onClick:n},"delete"))},p=function(e){return null===e.message?o.a.createElement("div",null," "):o.a.createElement("div",{style:!0===e.error?{color:"red",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:5,marginBottom:10}:{color:"green",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:5,marginBottom:10}},e.message)},g=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],u=Object(a.useState)(""),l=Object(c.a)(u,2),i=l[0],s=l[1],g=Object(a.useState)(""),E=Object(c.a)(g,2),v=E[0],y=E[1],j=Object(a.useState)(""),O=Object(c.a)(j,2),w=O[0],S=O[1],k=Object(a.useState)(null),C=Object(c.a)(k,2),T=C[0],x=C[1],B=Object(a.useState)(!1),D=Object(c.a)(B,2),z=D[0],A=D[1];Object(a.useEffect)((function(){d().then((function(e){r(e)}))}),[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{onChange:function(e){S(e.target.value)},value:w})),o.a.createElement("h2",null,"Add a new"),o.a.createElement(p,{error:z,message:T}),o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===i}));if(t.length>0){if(window.confirm("".concat(t[0].name," is already exist, do you want to update its information?"))){var a={name:t[0].name,number:v,id:t[0].id};b(t[0].id,a).then((function(e){r(n.map((function(t){return t.name===a.name?e:t}))),x("".concat(a.name," updated successfully")),s(""),y(""),setTimeout((function(){x(null)}),5e3)})).catch((function(e){console.log(e)}))}}else{var o={name:i,number:v,id:Math.floor(101*Math.random())};m(o).then((function(e){console.log(e),r(n.concat(e)),s(""),y(""),x("person added successfully"),setTimeout((function(){x(null)}),5e3)})).catch((function(e){x(e.response.data)}))}}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{onChange:function(e){s(e.target.value)},value:i})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{onChange:function(e){y(e.target.value)},value:v})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))),o.a.createElement("h2",null,"Numbers"),o.a.createElement("ul",null,n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})).map((function(e,t){return o.a.createElement(h,{key:t,person:e,handleDelete:function(){return t=e.name,a=e.id,void(window.confirm("Are you sure to delete ".concat(t," ?"))&&f(a).then((function(){r(n.filter((function(e){return e.id!==a}))),s(""),y(""),x("person by name ".concat(t," deleted successfully")),setTimeout((function(){x(null)}),5e3)})).catch((function(e){console.log("error"),A(!0),x("this object does not exist any more"),r(n.filter((function(e){return e.name!==t}))),setTimeout((function(){x(null),A(!1)}),5e3)})));var t,a}})}))))};u.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b66dd68a.chunk.js.map